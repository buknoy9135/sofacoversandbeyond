<% flash.each do |key, message| %>
  <% css_classes = case key.to_sym
     when :notice
       "bg-green-100 border-green-400 text-green-700"
     when :alert
       "bg-red-100 border-red-400 text-red-700"
     else
       "bg-blue-100 border-blue-400 text-blue-700"
     end
  %>

  <div
    class="flash-message fixed top-4 right-4 z-50 w-auto max-w-sm px-4 py-2 border shadow-lg rounded flex items-center justify-between space-x-3 <%= css_classes %>"
    role="alert"
  >
    <p class="text-sm"><%= message %></p>
    <button
      type="button"
      class="ml-2 text-gray-500 hover:text-gray-700 focus:outline-none"
      aria-label="Close"
      onclick="this.parentElement.remove();"
    >
      Ã—
    </button>
  </div>
<% end %>

<script>
  // Auto-hide flash after 3 seconds with fade out
  document.querySelectorAll(".flash-message").forEach(function(flash) {
    setTimeout(() => {
      flash.style.transition = "opacity 0.5s ease";
      flash.style.opacity = "0";
      setTimeout(() => flash.remove(), 500); // remove from DOM after fade out
    }, 3000);
  });
</script>
